# ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©ë²•

Angple í”„ë¡œì íŠ¸ì˜ ê°œë°œ/ë°°í¬ë¥¼ ë•ëŠ” ìŠ¤í¬ë¦½íŠ¸ ëª¨ìŒì…ë‹ˆë‹¤.

## ğŸ“‹ ìŠ¤í¬ë¦½íŠ¸ ëª©ë¡

| ìŠ¤í¬ë¦½íŠ¸           | ìš©ë„                       | ì‚¬ìš© ë¹ˆë„           |
| ------------------ | -------------------------- | ------------------- |
| `server.sh`        | ì„œë²„ ì‹œì‘/ì¤‘ì§€/ìƒíƒœ í™•ì¸   | ë§¤ì¼                |
| `sync.sh`          | ì•ˆì „í•œ ì½”ë“œ ë™ê¸°í™”         | ë§¤ì¼ (ì‘ì—… ì‹œì‘ ì „) |
| `setup-hooks.sh`   | Git hooks ì„¤ì¹˜             | ìµœì´ˆ 1íšŒ            |
| `backup-branch.sh` | ì‘ì—… ë‚´ìš© ë°±ì—… ë¸Œëœì¹˜ ìƒì„± | ìœ„í—˜í•œ ì‘ì—… ì „      |
| `check-clean.sh`   | Git ìƒíƒœ ê²€ì¦              | ë°°í¬ ì „             |
| `deploy.sh`        | í”„ë¡œë•ì…˜ ë°°í¬              | ë°°í¬ ì‹œ             |
| `new-branch.sh`    | ìƒˆ ë¸Œëœì¹˜ ìƒì„±             | ìƒˆ ì‘ì—… ì‹œì‘ ì‹œ     |
| `finish-branch.sh` | ë¸Œëœì¹˜ ì •ë¦¬                | PR ë¨¸ì§€ í›„          |
| `dev-server.sh`    | dev ì„œë²„ ê´€ë¦¬ (ë ˆê±°ì‹œ)     | -                   |

---

## ğŸš€ server.sh - ì„œë²„ í†µí•© ê´€ë¦¬

dev.damoang.netê³¼ web.damoang.net ì„œë²„ë¥¼ í†µí•© ê´€ë¦¬í•©ë‹ˆë‹¤.

### ê¸°ë³¸ ì‚¬ìš©ë²•

```bash
./scripts/server.sh {dev|web|all} {start|stop|restart|status}
```

### ì˜ˆì‹œ

```bash
# dev ì„œë²„ ì‹œì‘ (dev.damoang.net)
./scripts/server.sh dev start

# web ì„œë²„ ì‹œì‘ (web.damoang.net)
./scripts/server.sh web start

# ëª¨ë“  ì„œë²„ ì‹œì‘
./scripts/server.sh all start

# dev ì„œë²„ ì¬ì‹œì‘ (ë¹Œë“œ + ì¬ì‹œì‘)
./scripts/server.sh dev restart

# ëª¨ë“  ì„œë²„ ìƒíƒœ í™•ì¸
./scripts/server.sh all status

# web ì„œë²„ ì¤‘ì§€
./scripts/server.sh web stop
```

### ì„œë²„ ì •ë³´

| ì„œë²„ | URL             | í¬íŠ¸ | ë””ë ‰í† ë¦¬                  | ìš©ë„     |
| ---- | --------------- | ---- | ------------------------- | -------- |
| dev  | dev.damoang.net | 3011 | /home/damoang/angple      | ìŠ¤í…Œì´ì§• |
| web  | web.damoang.net | 3010 | /home/damoang/angple-prod | í”„ë¡œë•ì…˜ |

### ë¡œê·¸ í™•ì¸

```bash
# dev ì„œë²„ ë¡œê·¸
tail -50 /tmp/angple-dev.log

# web ì„œë²„ ë¡œê·¸
tail -50 /tmp/angple-prod.log

# ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„°ë§
tail -f /tmp/angple-prod.log
```

---

## ğŸ”„ sync.sh - ì•ˆì „í•œ ì½”ë“œ ë™ê¸°í™”

ë¡œì»¬ ë³€ê²½ì‚¬í•­ì„ ë³´ì¡´í•˜ë©´ì„œ ìµœì‹  ì½”ë“œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

### ê¸°ë³¸ ì‚¬ìš©ë²•

```bash
./scripts/sync.sh [ë¸Œëœì¹˜ëª…]
```

### ì˜ˆì‹œ

```bash
# í˜„ì¬ ë¸Œëœì¹˜ ì—…ë°ì´íŠ¸ (ë¡œì»¬ ë³€ê²½ ë³´ì¡´)
./scripts/sync.sh

# main ë¸Œëœì¹˜ë¡œ ì „í™˜ í›„ ì—…ë°ì´íŠ¸
./scripts/sync.sh main
```

âš ï¸ **--force ì˜µì…˜ì€ ë§¤ìš° ìœ„í—˜í•©ë‹ˆë‹¤!**

-   ë¡œì»¬ì˜ ëª¨ë“  ë³€ê²½ì‚¬í•­ì´ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤
-   ë³µêµ¬ê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤
-   ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”! ëŒ€ì‹  ë°±ì—… ë¸Œëœì¹˜ë¥¼ ë§Œë“œì„¸ìš”:

```bash
# ì•ˆì „í•œ ë°©ë²•: ë°±ì—… í›„ ì´ˆê¸°í™”
git checkout -b backup-$(date +%Y%m%d-%H%M%S)
git add -A
git commit -m "Backup"
git checkout main
./scripts/sync.sh main
```

### ìë™ ì²˜ë¦¬ í•­ëª©

1. âœ… ë¡œì»¬ ë³€ê²½ì‚¬í•­ ì„ì‹œ ì €ì¥ (git stash)
2. âœ… ìµœì‹  ì½”ë“œ ê°€ì ¸ì˜¤ê¸° (git pull --rebase)
3. âœ… ë³€ê²½ì‚¬í•­ ë³µì› (git stash pop)
4. âœ… ì˜ì¡´ì„± ì—…ë°ì´íŠ¸ (package.json ë³€ê²½ ê°ì§€ ì‹œ)
5. âœ… ë¹Œë“œ ìºì‹œ ì •ë¦¬

---

## ğŸª setup-hooks.sh - Git Hooks ì„¤ì¹˜

Git hooksë¥¼ ì„¤ì¹˜í•˜ì—¬ ì»¤ë°‹ ì „ ìë™ í¬ë§·íŒ… ë° main ë¸Œëœì¹˜ ë³´í˜¸ë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤.

### ê¸°ë³¸ ì‚¬ìš©ë²•

```bash
./scripts/setup-hooks.sh
```

### ì„¤ì¹˜ë˜ëŠ” Hooks

**pre-commit hook:**

1. **main ë¸Œëœì¹˜ ë³´í˜¸**
    - main/master ë¸Œëœì¹˜ì— ì§ì ‘ ì»¤ë°‹ ë°©ì§€
    - ë¸Œëœì¹˜ ìƒì„± ì•ˆë‚´

2. **ìë™ ì½”ë“œ í¬ë§·íŒ…**
    - ì»¤ë°‹ ì „ staged íŒŒì¼ë§Œ í¬ë§·íŒ…
    - prettierë¡œ ìë™ ì •ë¦¬
    - í¬ë§·íŒ…ëœ íŒŒì¼ ìë™ re-stage

### íš¨ê³¼

```bash
# ì»¤ë°‹ ì‹œë„ ì‹œ
git commit -m "feat: ìƒˆ ê¸°ëŠ¥"

# ìë™ ì‹¤í–‰:
# ğŸ”§ ì½”ë“œ í¬ë§·íŒ… ì¤‘...
# âœ… í¬ë§·íŒ… ì™„ë£Œ
# [ë¸Œëœì¹˜ëª… abc1234] feat: ìƒˆ ê¸°ëŠ¥
```

### ìµœì´ˆ ì„¤ì • (ê¶Œì¥)

í”„ë¡œì íŠ¸ë¥¼ í´ë¡ í•œ í›„ ì¦‰ì‹œ ì‹¤í–‰í•˜ì„¸ìš”:

```bash
cd /home/damoang/angple
./scripts/setup-hooks.sh
```

### ì´ì 

-   âœ… CI/CD í¬ë§· ì²´í¬ ì‹¤íŒ¨ ë°©ì§€ (ë§¤ë²ˆ ì‹¤íŒ¨ ì—†ìŒ!)
-   âœ… ì½”ë“œ ìŠ¤íƒ€ì¼ ìë™ í†µì¼
-   âœ… main ë¸Œëœì¹˜ ì‹¤ìˆ˜ ì»¤ë°‹ ë°©ì§€
-   âœ… PR ë¦¬ë·° ì‹œê°„ ë‹¨ì¶•

---

### ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ì•„ì¹¨ ì¶œê·¼ í›„

```bash
cd /home/damoang/angple
./scripts/sync.sh main
./scripts/server.sh dev restart
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: PR ë¨¸ì§€ í›„ ë¡œì»¬ ì—…ë°ì´íŠ¸

```bash
./scripts/finish-branch.sh  # ë¸Œëœì¹˜ ì •ë¦¬ + mainìœ¼ë¡œ ë³µê·€ + pull
```

#### ì‹œë‚˜ë¦¬ì˜¤ 3: ë‹¤ë¥¸ ë¸Œëœì¹˜ë¡œ ì „í™˜

```bash
./scripts/sync.sh feature/new-feature
```

---

## âœ… check-clean.sh - Git ìƒíƒœ ê²€ì¦

ë°°í¬ ì „ Git ì €ì¥ì†Œ ìƒíƒœë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.

### ê¸°ë³¸ ì‚¬ìš©ë²•

```bash
./scripts/check-clean.sh [--fix]
```

### ì˜ˆì‹œ

```bash
# ìƒíƒœ í™•ì¸ë§Œ
./scripts/check-clean.sh

# ìë™ ìˆ˜ì • ì‹œë„ (ëŒ€í™”í˜•)
./scripts/check-clean.sh --fix
```

### ê²€ì‚¬ í•­ëª©

1. âœ… ì¶”ì ë˜ì§€ ì•Šì€ íŒŒì¼ (ë¹Œë“œ íŒŒì¼ í¬í•¨ ì—¬ë¶€)
2. âœ… ìˆ˜ì •ëœ íŒŒì¼ (ì»¤ë°‹ í•„ìš” ì—¬ë¶€)
3. âœ… Staged íŒŒì¼ (ì»¤ë°‹ ëŒ€ê¸° ì¤‘)
4. âœ… ì›ê²©ê³¼ ë™ê¸°í™” (push/pull í•„ìš” ì—¬ë¶€)
5. âœ… data/ ë””ë ‰í† ë¦¬ ì¶”ì  ì—¬ë¶€

### ë°°í¬ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

```bash
# 1. ìƒíƒœ í™•ì¸
./scripts/check-clean.sh

# 2. ë¬¸ì œê°€ ìˆìœ¼ë©´ ìˆ˜ì •
./scripts/check-clean.sh --fix

# 3. ëª¨ë“  ë³€ê²½ì‚¬í•­ í‘¸ì‹œ
git push origin main

# 4. ë°°í¬
./scripts/deploy.sh
```

---

## ğŸ“¦ deploy.sh - í”„ë¡œë•ì…˜ ë°°í¬

angple/ì—ì„œ ë¹Œë“œ í›„ angple-prod/ì— ë°°í¬í•©ë‹ˆë‹¤.

### ê¸°ë³¸ ì‚¬ìš©ë²•

```bash
./scripts/deploy.sh
```

### ë°°í¬ í”„ë¡œì„¸ìŠ¤

```
[0/4] ë°°í¬ ì „ ê²€ì¦ (check-clean.sh ìë™ ì‹¤í–‰)
  â†“
[1/4] ë¹Œë“œ (angple/apps/web)
  â†“
[2/4] íŒŒì¼ ë³µì‚¬ (angple/ â†’ angple-prod/)
  â†“
[3/4] ì„œë²„ ì¬ì‹œì‘ (web.damoang.net:3010)
  â†“
[4/4] ìƒíƒœ í™•ì¸ (HTTP 200 ì²´í¬)
```

### ì•ˆì „ì¥ì¹˜

-   ë°°í¬ ì „ Git ìƒíƒœ ìë™ ê²€ì¦
-   ê²€ì¦ ì‹¤íŒ¨ ì‹œ ê³„ì† ì§„í–‰ ì—¬ë¶€ í™•ì¸
-   ê¸°ì¡´ ì„œë²„ graceful shutdown
-   ë°°í¬ ì‹¤íŒ¨ ì‹œ ë¡œê·¸ ê²½ë¡œ ì•ˆë‚´

### ë°°í¬ í›„ í™•ì¸

```bash
# ì„œë²„ ìƒíƒœ í™•ì¸
./scripts/server.sh web status

# ë¡œê·¸ í™•ì¸
tail -50 /tmp/angple-prod.log

# ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸
curl -I https://web.damoang.net
```

---

## ğŸŒ¿ new-branch.sh - ìƒˆ ë¸Œëœì¹˜ ìƒì„±

ìµœì‹  mainì„ ê¸°ë°˜ìœ¼ë¡œ ìƒˆ ë¸Œëœì¹˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

### ê¸°ë³¸ ì‚¬ìš©ë²•

```bash
./scripts/new-branch.sh <ë¸Œëœì¹˜ëª…>
```

### ì˜ˆì‹œ

```bash
# ê¸°ëŠ¥ ê°œë°œ ë¸Œëœì¹˜
./scripts/new-branch.sh feat/ì‚¬ìš©ìì¸ì¦

# ë²„ê·¸ ìˆ˜ì • ë¸Œëœì¹˜
./scripts/new-branch.sh fix/ë¡œê·¸ì¸ì˜¤ë¥˜

# ë¦¬íŒ©í† ë§ ë¸Œëœì¹˜
./scripts/new-branch.sh refactor/apií´ë¼ì´ì–¸íŠ¸
```

### ìë™ ì²˜ë¦¬

1. main ë¸Œëœì¹˜ë¡œ ì „í™˜
2. ìµœì‹  ì½”ë“œ pull
3. ìƒˆ ë¸Œëœì¹˜ ìƒì„± ë° ì „í™˜

---

## ğŸ§¹ finish-branch.sh - ë¸Œëœì¹˜ ì •ë¦¬

PR ë¨¸ì§€ í›„ ë¡œì»¬ ë¸Œëœì¹˜ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.

### ê¸°ë³¸ ì‚¬ìš©ë²•

```bash
./scripts/finish-branch.sh
```

### ìë™ ì²˜ë¦¬

1. í˜„ì¬ ë¸Œëœì¹˜ ì‚­ì œ
2. main ë¸Œëœì¹˜ë¡œ ì „í™˜
3. ìµœì‹  ì½”ë“œ pull

### ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

```bash
# 1. ì‘ì—… ë¸Œëœì¹˜ì—ì„œ ì»¤ë°‹ & í‘¸ì‹œ
git add .
git commit -m "feat: ìƒˆ ê¸°ëŠ¥ ì¶”ê°€"
git push origin feat/ìƒˆê¸°ëŠ¥

# 2. GitHubì—ì„œ PR ìƒì„± ë° ë¨¸ì§€

# 3. ë¡œì»¬ ë¸Œëœì¹˜ ì •ë¦¬
./scripts/finish-branch.sh
```

---

## ğŸ’¾ backup-branch.sh - ì‘ì—… ë°±ì—…

ìœ„í—˜í•œ ì‘ì—…(reset, clean ë“±)ì„ ìˆ˜í–‰í•˜ê¸° ì „ì— í˜„ì¬ ì‘ì—… ë‚´ìš©ì„ ë°±ì—…í•©ë‹ˆë‹¤.

### ê¸°ë³¸ ì‚¬ìš©ë²•

```bash
./scripts/backup-branch.sh [ë°±ì—…ëª…]
```

### ì˜ˆì‹œ

```bash
# ìë™ ì´ë¦„ìœ¼ë¡œ ë°±ì—… (backup-YYYYMMDD-HHMMSS)
./scripts/backup-branch.sh

# ì»¤ìŠ¤í…€ ì´ë¦„ìœ¼ë¡œ ë°±ì—…
./scripts/backup-branch.sh "ì‹¤í—˜ì ê¸°ëŠ¥-ë°±ì—…"
```

### ìë™ ì²˜ë¦¬

1. í˜„ì¬ ë¸Œëœì¹˜ì—ì„œ ìƒˆ ë°±ì—… ë¸Œëœì¹˜ ìƒì„±
2. ëª¨ë“  ë³€ê²½ì‚¬í•­(tracked + untracked) ì»¤ë°‹
3. ì›ë˜ ë¸Œëœì¹˜ë¡œ ë³µê·€ ì•ˆë‚´

### ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ì‹¤í—˜ì ì¸ ë³€ê²½ ì „

```bash
# ë°±ì—… ìƒì„±
./scripts/backup-branch.sh "ì‹¤í—˜ì „ë°±ì—…"

# ì›ë˜ ë¸Œëœì¹˜ë¡œ ë³µê·€
git checkout main

# ì‹¤í—˜ì  ì‘ì—… ìˆ˜í–‰
# ...

# ì‹¤íŒ¨í–ˆìœ¼ë©´ ë°±ì—… ë³µì›
git checkout ì‹¤í—˜ì „ë°±ì—…
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: ë³µì¡í•œ ì¶©ëŒ ë°œìƒ ì‹œ

```bash
# ë°±ì—… ìƒì„±
./scripts/backup-branch.sh

# ì›ë˜ ë¸Œëœì¹˜ë¡œ ë³µê·€ í›„ ì´ˆê¸°í™”
git checkout main
./scripts/sync.sh main

# ë‚˜ì¤‘ì— ë°±ì—…ì—ì„œ í•„ìš”í•œ ë¶€ë¶„ë§Œ ì²´ë¦¬í”½
git checkout backup-20260211-143022
git log --oneline  # í•„ìš”í•œ ì»¤ë°‹ ì°¾ê¸°
git checkout main
git cherry-pick <ì»¤ë°‹í•´ì‹œ>
```

#### ì‹œë‚˜ë¦¬ì˜¤ 3: ì •ë¦¬ê°€ í•„ìš”í•  ë•Œ

```bash
# ë°±ì—… ëª©ë¡ í™•ì¸
git branch | grep backup

# ì˜¤ë˜ëœ ë°±ì—… ì‚­ì œ
git branch -D backup-20260101-120000
```

---

## ğŸ“Š ì¼ë°˜ì ì¸ ì›Œí¬í”Œë¡œìš°

### ë§¤ì¼ ì•„ì¹¨ (ì‘ì—… ì‹œì‘)

```bash
cd /home/damoang/angple
./scripts/sync.sh main
./scripts/server.sh dev start
```

### ìƒˆ ì‘ì—… ì‹œì‘

```bash
./scripts/new-branch.sh feat/ì‘ì—…ëª…
# ì½”ë“œ ìˆ˜ì •...
./scripts/server.sh dev restart  # í…ŒìŠ¤íŠ¸
```

### ì»¤ë°‹ & PR

```bash
git add .
git commit -m "feat: ì‘ì—… ë‚´ìš©"
git push origin feat/ì‘ì—…ëª…
# GitHubì—ì„œ PR ìƒì„±
```

### PR ë¨¸ì§€ í›„

```bash
./scripts/finish-branch.sh
```

### í”„ë¡œë•ì…˜ ë°°í¬

```bash
./scripts/check-clean.sh        # ë°°í¬ ì „ ê²€ì¦
./scripts/deploy.sh             # ë°°í¬
./scripts/server.sh web status  # ìƒíƒœ í™•ì¸
```

---

## ğŸ†˜ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ì„œë²„ê°€ ì‹œì‘ë˜ì§€ ì•Šì„ ë•Œ

```bash
# í¬íŠ¸ ì ìœ  í™•ì¸
lsof -i:3010  # web ì„œë²„
lsof -i:3011  # dev ì„œë²„

# í”„ë¡œì„¸ìŠ¤ ê°•ì œ ì¢…ë£Œ
kill -9 $(lsof -t -i:3010)

# ë¡œê·¸ í™•ì¸
tail -50 /tmp/angple-prod.log

# ì¬ì‹œì‘
./scripts/server.sh web restart
```

### sync.sh ì¶©ëŒ ë°œìƒ ì‹œ

```bash
# ì¶©ëŒ íŒŒì¼ í™•ì¸
git status

# ì¶©ëŒ í•´ê²° í›„
git add .
git stash drop

# ë˜ëŠ” ë°±ì—… í›„ ì´ˆê¸°í™” (ì•ˆì „)
git checkout -b backup-$(date +%Y%m%d-%H%M%S)
git add -A
git commit -m "Backup before reset"
git checkout main
./scripts/sync.sh main
```

### ë°°í¬ ê²€ì¦ ì‹¤íŒ¨ ì‹œ

```bash
# ìƒì„¸ í™•ì¸
./scripts/check-clean.sh

# ìë™ ìˆ˜ì • ì‹œë„
./scripts/check-clean.sh --fix

# ìˆ˜ë™ ìˆ˜ì • í›„ ì¬ë°°í¬
git add -A
git commit -m "chore: ë°°í¬ ì „ ì •ë¦¬"
git push origin main
./scripts/deploy.sh
```

### ë¹Œë“œ íŒŒì¼ì´ Gitì— ì¶”ì ë  ë•Œ

```bash
# ì¶”ì  ì œê±° (íŒŒì¼ì€ ìœ ì§€)
git rm -r --cached build/ .svelte-kit/
git commit -m "chore: ë¹Œë“œ íŒŒì¼ ì¶”ì  ì œê±°"

# .gitignore í™•ì¸
cat .gitignore | grep -E "build/|\.svelte-kit/"
```

---

## ğŸ“š ì¶”ê°€ ìë£Œ

-   [í˜•ìƒê´€ë¦¬ ê°€ì´ë“œ](./í˜•ìƒê´€ë¦¬-ê°€ì´ë“œ.md) - Git ì¶©ëŒ í•´ê²° ë° ì¬ë°œ ë°©ì§€
-   [CLAUDE.md](../CLAUDE.md) - í”„ë¡œì íŠ¸ ì „ì²´ ê°€ì´ë“œ

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2026-02-11
